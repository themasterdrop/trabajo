
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Visualización de Gráficos</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>   
  <style>

    iframe {
      width: 1000px;
      height: 600px;
      border: none;

      margin: 20px auto; /* Centra horizontalmente */
      display: block;    /* Necesario para que margin auto funcione */
  
    }
    body {
      font-family: sans-serif;
      padding: 20px;
      text-align: center;  
    }
  </style>
</head>
<body>
  <h1>Hospital María Auxiliadora - Análisis de datos mediante gráficos</h1>

   <h2>Gráfico por Edad</h2>
   <iframe src="grafico_edad.html" width="800" height="500"></iframe>

   <h2>Gráfico por Tipo de Seguro</h2>
   <iframe src="gráfico_seguro.html" width="900" height="650"></iframe>
      
   <h2>Análisis de citas en el hospital María Auxiliadora</h2>
   <iframe class="grafico-derecha"  src="gráfico_cita.html" width="1000" height="800" style="margin-left: 20px;"></iframe>
   
   <h2>Análisis de citas en el hospital María Auxiliadora según la especialidad médica</h2>
   <iframe class="grafico-derecha"  src="grafico_especialidades.html" width="1920" height="800" style="margin-left: 20px;"></iframe>
   
   <h2>Distribución de Días de Espera</h2>
   <div id="histograma" style="width: 100%; height: 500px;"></div>

   <h2>Distribución por Especialidad</h2>
   <div id="piechart" style="width: 100%; height: 500px;"></div>

   
   
<script>
  fetch('datos.json')
    .then(response => response.json())
    .then(data => {
      const dias = data.map(d => d.DIFERENCIA_DIAS);

      // Crear histograma
      const histData = [{
        x: dias,
        type: 'histogram',
        marker: { color: '#1f77b4' }
      }];

      const histLayout = {
        title: 'Días de Espera',
        xaxis: { title: 'Días' },
        yaxis: { title: 'Frecuencia' }
      };

      Plotly.newPlot('histograma', histData, histLayout);

      // Función para actualizar el gráfico de pastel
      function actualizarPieChart(diaSeleccionado) {
        const filtrados = data.filter(d => d.DIFERENCIA_DIAS === diaSeleccionado);
        const conteo = {};
        filtrados.forEach(d => {
          conteo[d.ESPECIALIDAD] = (conteo[d.ESPECIALIDAD] || 0) + 1;
        });

        const labels = Object.keys(conteo);
        const values = Object.values(conteo);

        const pieData = [{
          labels: labels,
          values: values,
          type: 'pie'
        }];

        const pieLayout = {
          title: `Especialidades para ${diaSeleccionado} días de espera`
        };

        Plotly.newPlot('piechart', pieData, pieLayout);
      }

      // Mostrar gráfico de pastel inicial con el día más frecuente
      const diaMasFrecuente = dias.sort((a,b) =>
        dias.filter(v => v===a).length - dias.filter(v => v===b).length
      ).pop();
      actualizarPieChart(diaMasFrecuente);

      // Evento de clic en el histograma
      document.getElementById('histograma').on('plotly_click', function(event) {
        const diaSeleccionado = event.points[0].x;
        actualizarPieChart(diaSeleccionado);
      });
    });
</script>

   

    


</body>
</html>
